(window["webpackJsonpvk-mini-drawings"]=window["webpackJsonpvk-mini-drawings"]||[]).push([[0],{157:function(e,t){},272:function(e,t,a){e.exports=a.p+"static/media/persik.4e1ec840.png"},366:function(e,t,a){e.exports=a(637)},445:function(e,t,a){},453:function(e,t,a){},501:function(e,t){},503:function(e,t){},535:function(e,t){},536:function(e,t){},637:function(e,t,a){"use strict";a.r(t);a(367),a(393),a(395),a(396),a(398),a(399),a(400),a(401),a(402),a(403),a(404),a(405),a(407),a(408),a(409),a(410),a(411),a(412),a(413),a(414),a(415),a(416),a(418),a(419),a(420),a(421),a(422),a(423),a(424),a(425),a(426),a(427),a(428),a(429),a(430),a(431),a(432),a(433),a(434),a(435);var n,o,s,c=a(0),r=a.n(c),l=a(160),i=a.n(l),u=a(25),d=a.n(u),p=a(287),m=a(22),f=a.n(m),h=a(271),b=a(28),g=a(116),E=a.n(g),A=a(70),v=a.n(A),_=(a(444),a(445),a(49)),j=a.n(_),k=a(44),O=a.n(k),w=a(48),M=a.n(w),P=a(69),C=a.n(P),K=a(55),W=a.n(K),V=a(79),S=a(92),y=a.n(S),I=a(114),R=a.n(I),q=a(115),z=a.n(q),U=(a(272),a(453),Object(V.b)(),a(285)),x=a.n(U),T=a(286),F=a.n(T),N=a(162),G=a.n(N),J=a(273),D=a.n(J),L=a(274),B=a.n(L),Y=a(275),Q=a.n(Y),X=a(94),Z=a(78),$=a.n(Z),H=a(161),ee=a.n(H),te=a(68),ae=a.n(te),ne=a(276),oe=a.n(ne),se=a(277),ce=a.n(se),re=a(93),le=a.n(re),ie=a(278),ue=a.n(ie),de=function(e){var t=e.id,a=e.postArr,n=e.showPhoto,o=e.setActiveModal;Object(c.useEffect)((function(){}),[]);var s=function(e){for(var t=[],a=0;a<e.length;a++)"photo"===e[a].type&&t.push(e[a].photo);return t};return r.a.createElement(j.a,{id:t},r.a.createElement(O.a,null,"\u041b\u0435\u043d\u0442\u0430"),a.length>0&&a.map((function(e){if(!e.is_pinned)return r.a.createElement(C.a,{key:e.id},r.a.createElement(W.a,null,r.a.createElement($.a,{before:r.a.createElement(ae.a,{src:"https://sun1-25.userapi.com/c857616/v857616788/170f9b/EKExqwLJWgs.jpg",size:48}),description:(t=e.date,oe()(1e3*t).format("DD.MM.YYYY  h:mm"))},r.a.createElement("a",{className:"text-decor-none",target:"_blank",href:"https://vk.com/moiresunke"},"\u041c\u043e\u0438 \u0440\u0438\u0441\u0443\u043d\u043a\u0438, \u043d\u0430\u0431\u0440\u043e\u0441\u043a\u0438 | \u0411\u043e\u0442")),e.text,s(e.attachments).length>0&&r.a.createElement(W.a,null,r.a.createElement("div",{className:"photo-shell"},s(e.attachments).map((function(e){var t,a=e.sizes.length-1;return r.a.createElement("img",(t={key:e.id,className:"photo-post"},Object(X.a)(t,"key",e.id),Object(X.a)(t,"src",e.sizes[a].url),Object(X.a)(t,"alt","img"),Object(X.a)(t,"onClick",(function(){return n(e.sizes[a].url)})),t))}))),r.a.createElement(ee.a,{wide:!0}),r.a.createElement("a",{target:"_blank",href:"https://vk.com/moiresunke?w=wall".concat(e.owner_id,"_").concat(e.id)}," ",r.a.createElement(ce.a,{className:"fix-margin-icon"}))),r.a.createElement(le.a,{vertical:"bottom"},r.a.createElement(M.a,{mode:"tertiary",before:r.a.createElement(ue.a,null),size:"xl",onClick:function(){return o("sendPost")}}," \u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c "))));var t})))},pe=a(279),me=a.n(pe),fe=a(280),he=a.n(fe),be=a(281),ge=a.n(be),Ee=(a(461),function(e){var t=e.id,a=e.setPopout,n=e.userArr,o=e.lang,s=e.checkMessage,l=e.isMessagesFromGroupAllowed,i=e.setcheckMessage,u=Object(c.useState)(!1),p=Object(b.a)(u,2),m=p[0],f=p[1],h=function(e){d.a.send("VKWebAppCallAPIMethod",{method:"users.get",request_id:"getUsers",params:{user_ids:e,v:"5.103",fields:"photo_50",access_token:"85685eaa85685eaa85685eaa2d8504b3b58856885685eaad8e8ae5c720f4db08e7e9ee0",lang:o}})};Object(c.useEffect)((function(){a(r.a.createElement(v.a,{size:"large"})),function(e){fetch("https://spreadsheets.google.com/feeds/cells/1SX9lV4-URRyErZJT-tDc6-A4vbpMzTniQKtUsRk10kg/1/public/full?alt=json").then((function(e){return e.json()})).then((function(t){t&&e(function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].content.$t);return t.join(",")}(t.feed.entry))}))}(h)}),[]),Object(c.useEffect)((function(){e.fetchedUser&&l()}),[e.fetchedUser]);var g=function(){var e,t;f(!0),setTimeout((function(){f(!1)}),(e=600,t=2e3,Math.floor(Math.random()*(t-e))+e))};return r.a.createElement(j.a,{id:t},r.a.createElement(O.a,null,"\u041a\u0430\u0442\u0430\u043b\u043e\u0433 \u0445\u0443\u0434\u043e\u0436\u043d\u0438\u043a\u043e\u0432"),r.a.createElement(C.a,{description:"\u0412\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u0430\u0436\u043d\u044b\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f",separator:"show"},r.a.createElement($.a,{asideContent:r.a.createElement(me.a,{checked:s,onChange:function(e){e.currentTarget.checked?(a(r.a.createElement(v.a,{size:"large"})),d.a.send("VKWebAppAllowMessagesFromGroup",{group_id:185650440,key:"dBuBKe1kFcdemzB"})):i(!1)}})},"Push-\u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f")),r.a.createElement(he.a,{onRefresh:function(){return g()},isFetching:m},r.a.createElement(C.a,null,r.a.createElement(ge.a,null,n.map((function(e,t){return r.a.createElement($.a,{key:t,target:"_blank",href:"https://vk.com/id".concat(e.id),before:r.a.createElement(ae.a,{src:e.photo_50})},e.first_name," ",e.last_name)}))))),r.a.createElement(le.a,{vertical:"bottom"},r.a.createElement(M.a,{className:"button-fix",size:"xl"}," \u041f\u043e\u043f\u0430\u0441\u0442\u044c \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0433 ")))}),Ae=Object(V.b)(),ve=function(e){var t=e.id,a=e.photo,n=e.go;return r.a.createElement(j.a,{id:t},r.a.createElement(O.a,{left:r.a.createElement(y.a,{onClick:n,"data-to":"home"},Ae===V.a?r.a.createElement(R.a,null):r.a.createElement(z.a,null))}," "),r.a.createElement("img",{src:a,alt:"img",className:"photo-preview"}))},_e=a(117),je=a.n(_e),ke=a(282),Oe=a.n(ke),we=a(283),Me=a.n(we),Pe=a(284),Ce=a.n(Pe),Ke=0,We=0,Ve=function(){var e=Object(c.useState)("post"),t=Object(b.a)(e,2),a=t[0],l=t[1],i=Object(c.useState)("home"),u=Object(b.a)(i,2),m=u[0],g=u[1],A=Object(c.useState)(null),_=Object(b.a)(A,2),j=_[0],k=_[1],O=Object(c.useState)(r.a.createElement(v.a,{size:"large"})),w=Object(b.a)(O,2),P=w[0],C=w[1],K=Object(c.useState)([]),V=Object(b.a)(K,2),S=V[0],y=V[1],I=Object(c.useState)("ru"),R=Object(b.a)(I,2),q=R[0],z=R[1],U=Object(c.useState)([]),T=Object(b.a)(U,2),N=T[0],J=T[1],L=Object(c.useState)(""),Y=Object(b.a)(L,2),X=Y[0],Z=Y[1],$=Object(c.useState)("subscription"),H=Object(b.a)($,2),ee=H[0],te=H[1],ne=Object(c.useState)(!1),oe=Object(b.a)(ne,2),se=oe[0],ce=oe[1],re=Object(c.useState)(null),le=Object(b.a)(re,2),ie=le[0],ue=le[1],pe=Object(c.useState)(null),me=Object(b.a)(pe,2),fe=(me[0],me[1]),he=Object(c.useState)(""),be=Object(b.a)(he,2),ge=be[0],Ae=be[1],_e=Object(c.useState)(0),ke=Object(b.a)(_e,2),we=ke[0],Pe=ke[1],Ve=Object(c.useState)(!0),Se=Object(b.a)(Ve,2);Se[0],Se[1];Object(c.useEffect)((function(){var e=new URLSearchParams(window.location.search);function t(){return(t=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,k(t),Ke=t.id,C(null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}z(e.get("vk_language")),function(){t.apply(this,arguments)}(),Ie()}),[]),Object(c.useEffect)((function(){console.log("\u0437\u0430\u043f\u0443\u0441\u043a\u0430\u044e \u044d\u0444\u0444\u0435\u043a\u0442"),d.a.subscribe((function(e){var t=e.detail,a=t.type,s=t.data;if("VKWebAppUpdateConfig"===a){var c=document.createAttribute("scheme");c.value=s.scheme?s.scheme:"client_light",document.body.attributes.setNamedItem(c)}if("VKWebAppCallAPIMethodResult"===a&&"getUsers"===s.request_id&&(C(null),y(s.response)),"VKWebAppCallAPIMethodResult"===a&&"getPosts"===s.request_id&&(C(null),s.response.items,J(s.response.items)),"VKWebAppCallAPIMethodResult"===a&&"getPostsAdd"===s.request_id&&(C(null),J([].concat(Object(p.a)(N),[s.response.items]))),"VKWebAppCallAPIMethodResult"===a&&"checkMessage"===s.request_id&&(C(null),0===s.response.is_allowed?ce(!1):ce(!0)),"VKWebAppAllowMessagesFromGroupResult"!==a&&"VKWebAppAllowMessagesFromGroupFailed"!==a||(C(null),Re()),"VKWebAppAccessTokenReceived"===a&&0===we&&(Pe(s.access_token),We=s.access_token,Fe(Ke,s.access_token)),"VKWebAppCallAPIMethodResult"===a&&"userAlbums"===s.request_id){var r="\u041c\u043e\u0438 \u0440\u0438\u0441\u0443\u043d\u043a\u0438, \u043d\u0430\u0431\u0440\u043e\u0441\u043a\u0438",l=s.response.items;if(0===s.response.count)Ne(r,r,We);else if(void 0===l.find((function(e){return e.title===r})))Ne(r,r,We);else{var i=l.find((function(e){return e.title===r})).id;i,Ue(i,We)}}"VKWebAppCallAPIMethodResult"===a&&"createAlbum"===s.request_id&&(s.response.id,Ue(s.response.id,We)),"VKWebAppCallAPIMethodResult"===a&&"photoUrl"===s.request_id&&(fe(s.response.upload_url),xe(s.response.upload_url,n,We,s.response.album_id)),"VKWebAppCallAPIMethodResult"===a&&"photoSave"===s.request_id&&(o="photo".concat(s.response[0].owner_id,"_").concat(s.response[0].id),qe()),"VKWebAppCallAPIMethodResult"===a&&"sendWall"===s.request_id&&(C(null),te("sendResult"),Ae(""),ue(null))}))}),[N,P,te]),Object(c.useEffect)((function(){}),[]);var ye=function(e){g(e.currentTarget.dataset.to)},Ie=function(){d.a.send("VKWebAppCallAPIMethod",{method:"wall.get",request_id:"getPosts",params:{filters:"post",owner_id:"-113161053",count:60,v:"5.105",access_token:"85685eaa85685eaa85685eaa2d8504b3b58856885685eaad8e8ae5c720f4db08e7e9ee0",lang:q,offset:0}})},Re=function(){d.a.send("VKWebAppCallAPIMethod",{method:"messages.isMessagesFromGroupAllowed",request_id:"checkMessage",params:{user_id:Ke,group_id:"185650440",v:"5.105",access_token:"4cf0c9c3b79670ff25922bc47c357ca124e281ed8207cf2507d4fa033792e483e81d94890a085d5509caa"}})},qe=function(){var e="".concat(o),t=Math.floor(1e9+Math.random()*(9e9+1-1e9));d.a.send("VKWebAppCallAPIMethod",{method:"wall.post",request_id:"sendWall",params:{owner_id:"-".concat("185650440"),from_group:"1",signed:"0",message:s,attachments:e,guid:t,v:"5.103",access_token:"90367c6c798c106c4e98663bed2148d2dd86964270a75b329668efd46b8aa051b8aab8d98dceb5bbd8d5a"}})},ze=r.a.createElement(Oe.a,{activeModal:ee},r.a.createElement(je.a,{id:"subscription",onClose:function(){return te(null)},icon:r.a.createElement(ae.a,{src:"https://sun1-25.userapi.com/c857616/v857616788/170f9b/EKExqwLJWgs.jpg",size:72}),caption:r.a.createElement("span",null,r.a.createElement("h1",null,"\u041c\u043e\u0438 \u0440\u0438\u0441\u0443\u043d\u043a\u0438, \u043d\u0430\u0431\u0440\u043e\u0441\u043a\u0438 | \u0411\u043e\u0442 "),"\u041c\u0438\u043d\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442 \u0412\u0430\u043c ",r.a.createElement("br",null)," \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e"),actions:[{title:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f",mode:"primary",action:function(){d.a.send("VKWebAppJoinGroup",{group_id:185650440}),te(null)}}],actionsLayout:"vertical"}),r.a.createElement(je.a,{id:"sendPost",onClose:function(){return te(null)}},r.a.createElement(W.a,null,r.a.createElement("h1",null,"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c"),r.a.createElement(Me.a,{className:"margin-bottom",value:ge,onChange:function(e){Ae(e.currentTarget.value),s=e.currentTarget.value},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}),r.a.createElement(Ce.a,{top:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"margin-bottom",before:r.a.createElement(Q.a,null),size:"l",onChange:function(e){var t=e.currentTarget.files[0];n=e.currentTarget.files[0];var a=new FileReader;a.readAsDataURL(t),a.onloadend=function(){ue(a.result)}}},"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"),ie&&r.a.createElement("img",{className:"margin-bottom modal-img",src:ie,alt:"img"}),r.a.createElement(M.a,{mode:"secondary",size:"xl",disabled:!ge,onClick:function(){return te(null),C(r.a.createElement(v.a,{size:"large"})),void(null===ie?qe():Ge())}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))),r.a.createElement(je.a,{id:"sendResult",onClose:function(){return te(null)},actions:[{title:"\u041e\u0442\u043b\u0438\u0447\u043d\u043e!",mode:"primary",action:function(){te(null)}}]},r.a.createElement(W.a,null,r.a.createElement("h1",null,"\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430!")))),Ue=function(e,t){d.a.send("VKWebAppCallAPIMethod",{method:"photos.getUploadServer",request_id:"photoUrl",params:{album_id:e,v:"5.103",access_token:t}})},xe=function(e,t,a,n){var o=new FormData;o.append("photo",t);fetch("https://cors-anywhere.herokuapp.com/"+e,{method:"POST",body:o,headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){return e.json()})).then((function(e){e&&Te(e.server,e.photos_list,e.hash,a,n)})).catch((function(e){}))},Te=function(e,t,a,n,o){d.a.send("VKWebAppCallAPIMethod",{method:"photos.save",request_id:"photoSave",params:{album_id:o,server:e,photos_list:t,hash:a,v:"5.101",access_token:n}})},Fe=function(e,t){d.a.send("VKWebAppCallAPIMethod",{method:"photos.getAlbums",request_id:"userAlbums",params:{owner_id:e,v:"5.103",access_token:t}})},Ne=function(e,t,a){d.a.send("VKWebAppCallAPIMethod",{method:"photos.createAlbum",request_id:"createAlbum",params:{title:e,description:t,v:"5.103",access_token:a}})},Ge=function(){d.a.send("VKWebAppGetAuthToken",{app_id:7138591,scope:"photos"})};return r.a.createElement(x.a,{activeStory:a,tabbar:r.a.createElement(F.a,null,r.a.createElement(G.a,{onClick:function(){return l("post")},selected:"post"===a},r.a.createElement(D.a,null)),r.a.createElement(G.a,{onClick:function(){return l("catalog")},selected:"catalog"===a},r.a.createElement(B.a,null)))},r.a.createElement(E.a,{activePanel:m,popout:P,id:"post",modal:ze},r.a.createElement(de,{id:"home",fetchedUser:j,go:ye,setPopout:C,lang:q,postArr:N,offset:0,showPhoto:function(e){Z(e),g("photo")},getPosts:Ie,setActiveModal:te}),r.a.createElement(ve,{id:"photo",go:ye,photo:X})),r.a.createElement(E.a,{activePanel:"people",popout:P,id:"catalog"},r.a.createElement(Ee,{setPopout:C,id:"people",fetchedUser:j,go:ye,userArr:S,lang:q,checkMessage:se,setcheckMessage:ce,isMessagesFromGroupAllowed:Re})))};d.a.send("VKWebAppInit"),i.a.render(r.a.createElement(Ve,null),document.getElementById("root"))}},[[366,1,2]]]);
//# sourceMappingURL=main.03283348.chunk.js.map