(window["webpackJsonpvk-mini-drawings"]=window["webpackJsonpvk-mini-drawings"]||[]).push([[0],{157:function(e,t){},272:function(e,t,a){e.exports=a.p+"static/media/persik.4e1ec840.png"},365:function(e,t,a){e.exports=a(636)},444:function(e,t,a){},452:function(e,t,a){},500:function(e,t){},502:function(e,t){},534:function(e,t){},535:function(e,t){},636:function(e,t,a){"use strict";a.r(t);a(366),a(392),a(394),a(395),a(397),a(398),a(399),a(400),a(401),a(402),a(403),a(404),a(406),a(407),a(408),a(409),a(410),a(411),a(412),a(413),a(414),a(415),a(417),a(418),a(419),a(420),a(421),a(422),a(423),a(424),a(425),a(426),a(427),a(428),a(429),a(430),a(431),a(432),a(433),a(434);var n,o,s=a(0),c=a.n(s),r=a(160),l=a.n(r),i=a(27),u=a.n(i),d=a(22),p=a.n(d),m=a(271),h=a(28),f=a(116),b=a.n(f),g=a(78),E=a.n(g),A=(a(443),a(444),a(48)),v=a.n(A),_=a(44),j=a.n(_),k=a(60),O=a.n(k),w=a(69),M=a.n(w),P=a(49),C=a.n(P),K=a(79),W=a(92),V=a.n(W),S=a(114),y=a.n(S),I=a(115),R=a.n(I),q=(a(272),a(452),Object(K.b)(),a(285)),U=a.n(q),z=a(286),x=a.n(z),F=a(162),T=a.n(F),N=a(273),G=a.n(N),J=a(274),D=a.n(J),L=a(275),B=a.n(L),Y=a(94),Q=a(77),X=a.n(Q),Z=a(161),$=a.n(Z),H=a(68),ee=a.n(H),te=a(276),ae=a.n(te),ne=a(277),oe=a.n(ne),se=a(93),ce=a.n(se),re=a(278),le=a.n(re),ie=function(e){var t=e.id,a=e.postArr,n=e.showPhoto,o=e.setActiveModal;Object(s.useEffect)((function(){}),[]);var r=function(e){for(var t=[],a=0;a<e.length;a++)"photo"===e[a].type&&t.push(e[a].photo);return t};return c.a.createElement(v.a,{id:t},c.a.createElement(j.a,null,"\u041b\u0435\u043d\u0442\u0430"),a.length>0&&a.map((function(e){if(!e.is_pinned)return c.a.createElement(M.a,{key:e.id},c.a.createElement(C.a,null,c.a.createElement(X.a,{before:c.a.createElement(ee.a,{src:"https://sun1-25.userapi.com/c857616/v857616788/170f9b/EKExqwLJWgs.jpg",size:48}),description:(t=e.date,ae()(1e3*t).format("DD.MM.YYYY  h:mm"))},c.a.createElement("a",{className:"text-decor-none",target:"_blank",href:"https://vk.com/moiresunke"},"\u041c\u043e\u0438 \u0440\u0438\u0441\u0443\u043d\u043a\u0438, \u043d\u0430\u0431\u0440\u043e\u0441\u043a\u0438 | \u0411\u043e\u0442")),e.text,r(e.attachments).length>0&&c.a.createElement(C.a,null,c.a.createElement("div",{className:"photo-shell"},r(e.attachments).map((function(e){var t,a=e.sizes.length-1;return c.a.createElement("img",(t={key:e.id,className:"photo-post"},Object(Y.a)(t,"key",e.id),Object(Y.a)(t,"src",e.sizes[a].url),Object(Y.a)(t,"alt","img"),Object(Y.a)(t,"onClick",(function(){return n(e.sizes[a].url)})),t))}))),c.a.createElement($.a,{wide:!0}),c.a.createElement("a",{target:"_blank",href:"https://vk.com/moiresunke?w=wall".concat(e.owner_id,"_").concat(e.id)}," ",c.a.createElement(oe.a,{className:"fix-margin-icon"}))),c.a.createElement(ce.a,{vertical:"bottom"},c.a.createElement(O.a,{mode:"tertiary",before:c.a.createElement(le.a,null),size:"xl",onClick:function(){return o("sendPost")}}," \u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c "))));var t})))},ue=a(279),de=a.n(ue),pe=a(280),me=a.n(pe),he=a(281),fe=a.n(he),be=(a(460),function(e){var t=e.id,a=e.setPopout,n=e.userArr,o=e.lang,r=e.checkMessage,l=e.isMessagesFromGroupAllowed,i=e.setcheckMessage,d=Object(s.useState)(!1),p=Object(h.a)(d,2),m=p[0],f=p[1],b=function(e){u.a.send("VKWebAppCallAPIMethod",{method:"users.get",request_id:"getUsers",params:{user_ids:e,v:"5.103",fields:"photo_50",access_token:"85685eaa85685eaa85685eaa2d8504b3b58856885685eaad8e8ae5c720f4db08e7e9ee0",lang:o}})};Object(s.useEffect)((function(){a(c.a.createElement(E.a,{size:"large"})),function(e){fetch("https://spreadsheets.google.com/feeds/cells/1SX9lV4-URRyErZJT-tDc6-A4vbpMzTniQKtUsRk10kg/1/public/full?alt=json").then((function(e){return e.json()})).then((function(t){t&&e(function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].content.$t);return t.join(",")}(t.feed.entry))}))}(b)}),[]),Object(s.useEffect)((function(){e.fetchedUser&&l()}),[e.fetchedUser]);var g=function(){var e,t;f(!0),setTimeout((function(){f(!1)}),(e=600,t=2e3,Math.floor(Math.random()*(t-e))+e))};return c.a.createElement(v.a,{id:t},c.a.createElement(j.a,null,"\u041a\u0430\u0442\u0430\u043b\u043e\u0433 \u0445\u0443\u0434\u043e\u0436\u043d\u0438\u043a\u043e\u0432"),c.a.createElement(M.a,{description:"\u0412\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u0430\u0436\u043d\u044b\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f",separator:"show"},c.a.createElement(X.a,{asideContent:c.a.createElement(de.a,{checked:r,onChange:function(e){e.currentTarget.checked?(a(c.a.createElement(E.a,{size:"large"})),u.a.send("VKWebAppAllowMessagesFromGroup",{group_id:185650440,key:"dBuBKe1kFcdemzB"})):i(!1)}})},"Push-\u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f")),c.a.createElement(me.a,{onRefresh:function(){return g()},isFetching:m},c.a.createElement(M.a,null,c.a.createElement(fe.a,null,n.map((function(e,t){return c.a.createElement(X.a,{key:t,target:"_blank",href:"https://vk.com/id".concat(e.id),before:c.a.createElement(ee.a,{src:e.photo_50})},e.first_name," ",e.last_name)}))))),c.a.createElement(ce.a,{vertical:"bottom"},c.a.createElement(C.a,null,c.a.createElement(O.a,{className:"button-fix",size:"xl"}," \u041f\u043e\u043f\u0430\u0441\u0442\u044c \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0433 "))))}),ge=Object(K.b)(),Ee=function(e){var t=e.id,a=e.photo,n=e.go;return c.a.createElement(v.a,{id:t},c.a.createElement(j.a,{left:c.a.createElement(V.a,{onClick:n,"data-to":"home"},ge===K.a?c.a.createElement(y.a,null):c.a.createElement(R.a,null))}," "),c.a.createElement("img",{src:a,alt:"img",className:"photo-preview"}))},Ae=a(117),ve=a.n(Ae),_e=a(282),je=a.n(_e),ke=a(283),Oe=a.n(ke),we=a(284),Me=a.n(we),Pe=0,Ce=0,Ke=function(e,t){u.a.send("VKWebAppCallAPIMethod",{method:"photos.getUploadServer",request_id:"photoUrl",params:{album_id:e,v:"5.103",access_token:t}})},We=function(e,t,a,n,o){u.a.send("VKWebAppCallAPIMethod",{method:"photos.save",request_id:"photoSave",params:{album_id:o,server:e,photos_list:t,hash:a,v:"5.101",access_token:n}})},Ve=function(e,t,a){u.a.send("VKWebAppCallAPIMethod",{method:"photos.createAlbum",request_id:"createAlbum",params:{title:e,description:t,v:"5.103",access_token:a}})},Se=function(){var e=Object(s.useState)("post"),t=Object(h.a)(e,2),a=t[0],r=t[1],l=Object(s.useState)("home"),i=Object(h.a)(l,2),d=i[0],f=i[1],g=Object(s.useState)(null),A=Object(h.a)(g,2),v=A[0],_=A[1],j=Object(s.useState)(c.a.createElement(E.a,{size:"large"})),k=Object(h.a)(j,2),O=k[0],w=k[1],M=Object(s.useState)([]),P=Object(h.a)(M,2),K=P[0],W=P[1],V=Object(s.useState)("ru"),S=Object(h.a)(V,2),y=S[0],I=S[1],R=Object(s.useState)([]),q=Object(h.a)(R,2),z=q[0],F=q[1],N=Object(s.useState)(0),J=Object(h.a)(N,2),L=J[0],Y=J[1],Q=Object(s.useState)(""),X=Object(h.a)(Q,2),Z=X[0],$=X[1],H=Object(s.useState)("subscription"),te=Object(h.a)(H,2),ae=te[0],ne=te[1],oe=Object(s.useState)(!1),se=Object(h.a)(oe,2),ce=se[0],re=se[1],le=Object(s.useState)(null),ue=Object(h.a)(le,2),de=ue[0],pe=ue[1],me=Object(s.useState)(null),he=Object(h.a)(me,2),fe=(he[0],he[1]),ge=Object(s.useState)(""),Ae=Object(h.a)(ge,2),_e=Ae[0],ke=Ae[1],we=Object(s.useState)(0),Se=Object(h.a)(we,2),ye=Se[0],Ie=Se[1];Object(s.useEffect)((function(){var e=new URLSearchParams(window.location.search);function t(){return(t=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,_(t),Pe=t.id,w(null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}I(e.get("vk_language")),u.a.subscribe((function(e){var t,a,s=e.detail,c=s.type,r=s.data;if("VKWebAppUpdateConfig"===c){var l=document.createAttribute("scheme");l.value=r.scheme?r.scheme:"client_light",document.body.attributes.setNamedItem(l)}if("VKWebAppCallAPIMethodResult"===c&&"getUsers"===r.request_id&&(w(null),W(r.response)),"VKWebAppCallAPIMethodResult"===c&&"getPosts"===r.request_id&&(w(null),F(r.response.items),Y(L+50),console.log(r.response.items)),"VKWebAppCallAPIMethodResult"===c&&"checkMessage"===r.request_id&&(w(null),0===r.response.is_allowed?re(!1):re(!0)),"VKWebAppAllowMessagesFromGroupResult"!==c&&"VKWebAppAllowMessagesFromGroupFailed"!==c||(w(null),Ue()),"VKWebAppAccessTokenReceived"===c&&0===ye&&(Ie(r.access_token),Ce=r.access_token,t=Pe,a=r.access_token,u.a.send("VKWebAppCallAPIMethod",{method:"photos.getAlbums",request_id:"userAlbums",params:{owner_id:t,v:"5.103",access_token:a}})),"VKWebAppCallAPIMethodResult"===c&&"userAlbums"===r.request_id){var i="\u041c\u043e\u0438 \u0440\u0438\u0441\u0443\u043d\u043a\u0438, \u043d\u0430\u0431\u0440\u043e\u0441\u043a\u0438",d=r.response.items;if(0===r.response.count)Ve(i,i,Ce);else if(void 0===d.find((function(e){return e.title===i})))Ve(i,i,Ce);else{var p=d.find((function(e){return e.title===i})).id;p,Ke(p,Ce)}}"VKWebAppCallAPIMethodResult"===c&&"createAlbum"===r.request_id&&(r.response.id,Ke(r.response.id,Ce)),"VKWebAppCallAPIMethodResult"===c&&"photoUrl"===r.request_id&&(fe(r.response.upload_url),function(e,t,a,n){var o=new FormData;o.append("photo",t);fetch("https://cors-anywhere.herokuapp.com/"+e,{method:"POST",body:o,headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){return e.json()})).then((function(e){e&&We(e.server,e.photos_list,e.hash,a,n)})).catch((function(e){}))}(r.response.upload_url,n,Ce,r.response.album_id)),"VKWebAppCallAPIMethodResult"===c&&"photoSave"===r.request_id&&(o="photo".concat(r.response[0].owner_id,"_").concat(r.response[0].id),xe()),"VKWebAppCallAPIMethodResult"===c&&"sendWall"===r.request_id&&(w(null),ne("sendResult"),ke(""),pe(null))})),function(){t.apply(this,arguments)}(),qe()}),[]),Object(s.useEffect)((function(){}),[]);var Re=function(e){f(e.currentTarget.dataset.to)},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";u.a.send("VKWebAppCallAPIMethod",{method:"wall.get",request_id:"getPosts",params:{filters:"post",owner_id:"-113161053",count:20,v:"5.105",access_token:"85685eaa85685eaa85685eaa2d8504b3b58856885685eaad8e8ae5c720f4db08e7e9ee0",lang:y,offset:e}})},Ue=function(){u.a.send("VKWebAppCallAPIMethod",{method:"messages.isMessagesFromGroupAllowed",request_id:"checkMessage",params:{user_id:Pe,group_id:"185650440",v:"5.105",access_token:"4cf0c9c3b79670ff25922bc47c357ca124e281ed8207cf2507d4fa033792e483e81d94890a085d5509caa"}})},ze=function(){w(c.a.createElement(E.a,{size:"large"})),null===de?xe():u.a.send("VKWebAppGetAuthToken",{app_id:7138591,scope:"photos"})},xe=function(){var e="".concat(o),t=Math.floor(1e9+Math.random()*(9e9+1-1e9));u.a.send("VKWebAppCallAPIMethod",{method:"wall.post",request_id:"sendWall",params:{owner_id:"-".concat("185650440"),from_group:"1",signed:"0",message:_e,attachments:e,guid:t,v:"5.101",access_token:"90367c6c798c106c4e98663bed2148d2dd86964270a75b329668efd46b8aa051b8aab8d98dceb5bbd8d5a"}})},Fe=c.a.createElement(je.a,{activeModal:ae},c.a.createElement(ve.a,{id:"subscription",onClose:function(){return ne(null)},icon:c.a.createElement(ee.a,{src:"https://sun1-25.userapi.com/c857616/v857616788/170f9b/EKExqwLJWgs.jpg",size:72}),caption:c.a.createElement("span",null,c.a.createElement("h1",null,"\u041c\u043e\u0438 \u0440\u0438\u0441\u0443\u043d\u043a\u0438, \u043d\u0430\u0431\u0440\u043e\u0441\u043a\u0438 | \u0411\u043e\u0442 "),"\u041c\u0438\u043d\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442 \u0412\u0430\u043c ",c.a.createElement("br",null)," \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e"),actions:[{title:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f",mode:"primary",action:function(){u.a.send("VKWebAppJoinGroup",{group_id:185650440}),ne(null)}}],actionsLayout:"vertical"}),c.a.createElement(ve.a,{id:"sendPost",onClose:function(){return ne(null)},actions:[{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",mode:"primary",action:function(){ze()},disabled:!_e}]},c.a.createElement(C.a,null,c.a.createElement("h1",null,"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c"),c.a.createElement(Oe.a,{className:"margin-bottom",value:_e,onChange:function(e){return ke(e.currentTarget.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}),c.a.createElement(Me.a,{top:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"margin-bottom",before:c.a.createElement(B.a,null),size:"l",onChange:function(e){var t=e.currentTarget.files[0];n=e.currentTarget.files[0];var a=new FileReader;a.readAsDataURL(t),a.onloadend=function(){pe(a.result)}}},"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"),de&&c.a.createElement("img",{className:"margin-bottom modal-img",src:de,alt:"img"}))),c.a.createElement(ve.a,{id:"sendResult",onClose:function(){return ne(null)},actions:[{title:"\u041e\u0442\u043b\u0438\u0447\u043d\u043e!",mode:"primary",action:function(){ne(null)}}]},c.a.createElement(C.a,null,c.a.createElement("h1",null,"\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430!"))));return c.a.createElement(U.a,{activeStory:a,tabbar:c.a.createElement(x.a,null,c.a.createElement(T.a,{onClick:function(){return r("post")},selected:"post"===a},c.a.createElement(G.a,null)),c.a.createElement(T.a,{onClick:function(){return r("catalog")},selected:"catalog"===a},c.a.createElement(D.a,null)))},c.a.createElement(b.a,{activePanel:d,popout:O,id:"post",modal:Fe},c.a.createElement(ie,{id:"home",fetchedUser:v,go:Re,setPopout:w,lang:y,postArr:z,offset:L,showPhoto:function(e){$(e),f("photo")},getPosts:qe,setActiveModal:ne}),c.a.createElement(Ee,{id:"photo",go:Re,photo:Z})),c.a.createElement(b.a,{activePanel:"people",popout:O,id:"catalog"},c.a.createElement(be,{setPopout:w,id:"people",fetchedUser:v,go:Re,userArr:K,lang:y,checkMessage:ce,setcheckMessage:re,isMessagesFromGroupAllowed:Ue})))};u.a.send("VKWebAppInit"),l.a.render(c.a.createElement(Se,null),document.getElementById("root"))}},[[365,1,2]]]);
//# sourceMappingURL=main.7ef90d93.chunk.js.map