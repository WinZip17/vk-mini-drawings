(window["webpackJsonpvk-mini-drawings"]=window["webpackJsonpvk-mini-drawings"]||[]).push([[0],{157:function(e,t){},272:function(e,t,a){e.exports=a.p+"static/media/persik.4e1ec840.png"},365:function(e,t,a){e.exports=a(636)},444:function(e,t,a){},452:function(e,t,a){},500:function(e,t){},502:function(e,t){},534:function(e,t){},535:function(e,t){},636:function(e,t,a){"use strict";a.r(t);a(366),a(392),a(394),a(395),a(397),a(398),a(399),a(400),a(401),a(402),a(403),a(404),a(406),a(407),a(408),a(409),a(410),a(411),a(412),a(413),a(414),a(415),a(417),a(418),a(419),a(420),a(421),a(422),a(423),a(424),a(425),a(426),a(427),a(428),a(429),a(430),a(431),a(432),a(433),a(434);var n,o,c,s=a(0),r=a.n(s),l=a(160),i=a.n(l),u=a(25),d=a.n(u),m=a(22),p=a.n(m),f=a(271),h=a(26),b=a(116),g=a.n(b),E=a(70),v=a.n(E),A=(a(443),a(444),a(49)),_=a.n(A),j=a(44),k=a.n(j),O=a(48),w=a.n(O),M=a(69),C=a.n(M),P=a(55),K=a.n(P),W=a(79),V=a(92),y=a.n(V),S=a(114),I=a.n(S),R=a(115),q=a.n(R),z=(a(272),a(452),Object(W.b)(),a(285)),U=a.n(z),x=a(286),T=a.n(x),F=a(162),N=a.n(F),G=a(273),H=a.n(G),L=a(274),J=a.n(L),D=a(275),Y=a.n(D),B=a(94),Q=a(78),X=a.n(Q),Z=a(161),$=a.n(Z),ee=a(68),te=a.n(ee),ae=a(276),ne=a.n(ae),oe=a(277),ce=a.n(oe),se=a(93),re=a.n(se),le=a(278),ie=a.n(le),ue=function(e){var t=e.id,a=e.postArr,n=e.showPhoto,o=e.setActiveModal;Object(s.useEffect)((function(){}),[]);var c=function(e){for(var t=[],a=0;a<e.length;a++)"photo"===e[a].type&&t.push(e[a].photo);return t};return r.a.createElement(_.a,{id:t},r.a.createElement(k.a,null,"\u041b\u0435\u043d\u0442\u0430"),a.length>0&&a.map((function(e){if(!e.is_pinned)return r.a.createElement(C.a,{key:e.id},r.a.createElement(K.a,null,r.a.createElement(X.a,{before:r.a.createElement(te.a,{src:"https://sun1-25.userapi.com/c857616/v857616788/170f9b/EKExqwLJWgs.jpg",size:48}),description:(t=e.date,ne()(1e3*t).format("DD.MM.YYYY  h:mm"))},r.a.createElement("a",{className:"text-decor-none",target:"_blank",href:"https://vk.com/moiresunke"},"\u041c\u043e\u0438 \u0440\u0438\u0441\u0443\u043d\u043a\u0438, \u043d\u0430\u0431\u0440\u043e\u0441\u043a\u0438 | \u0411\u043e\u0442")),e.text,c(e.attachments).length>0&&r.a.createElement(K.a,null,r.a.createElement("div",{className:"photo-shell"},c(e.attachments).map((function(e){var t,a=e.sizes.length-1;return r.a.createElement("img",(t={key:e.id,className:"photo-post"},Object(B.a)(t,"key",e.id),Object(B.a)(t,"src",e.sizes[a].url),Object(B.a)(t,"alt","img"),Object(B.a)(t,"onClick",(function(){return n(e.sizes[a].url)})),t))}))),r.a.createElement($.a,{wide:!0}),r.a.createElement("a",{target:"_blank",href:"https://vk.com/moiresunke?w=wall".concat(e.owner_id,"_").concat(e.id)}," ",r.a.createElement(ce.a,{className:"fix-margin-icon"}))),r.a.createElement(re.a,{vertical:"bottom"},r.a.createElement(w.a,{mode:"tertiary",before:r.a.createElement(ie.a,null),size:"xl",onClick:function(){return o("sendPost")}}," \u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c "))));var t})))},de=a(279),me=a.n(de),pe=a(280),fe=a.n(pe),he=a(281),be=a.n(he),ge=(a(460),function(e){var t=e.id,a=e.setPopout,n=e.userArr,o=e.lang,c=e.checkMessage,l=e.isMessagesFromGroupAllowed,i=e.setcheckMessage,u=Object(s.useState)(!1),m=Object(h.a)(u,2),p=m[0],f=m[1],b=function(e){d.a.send("VKWebAppCallAPIMethod",{method:"users.get",request_id:"getUsers",params:{user_ids:e,v:"5.103",fields:"photo_50",access_token:"85685eaa85685eaa85685eaa2d8504b3b58856885685eaad8e8ae5c720f4db08e7e9ee0",lang:o}})};Object(s.useEffect)((function(){a(r.a.createElement(v.a,{size:"large"})),function(e){fetch("https://spreadsheets.google.com/feeds/cells/1SX9lV4-URRyErZJT-tDc6-A4vbpMzTniQKtUsRk10kg/1/public/full?alt=json").then((function(e){return e.json()})).then((function(t){t&&e(function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].content.$t);return t.join(",")}(t.feed.entry))}))}(b)}),[]),Object(s.useEffect)((function(){e.fetchedUser&&l()}),[e.fetchedUser]);var g=function(){var e,t;f(!0),setTimeout((function(){f(!1)}),(e=600,t=2e3,Math.floor(Math.random()*(t-e))+e))};return r.a.createElement(_.a,{id:t},r.a.createElement(k.a,null,"\u041a\u0430\u0442\u0430\u043b\u043e\u0433 \u0445\u0443\u0434\u043e\u0436\u043d\u0438\u043a\u043e\u0432"),r.a.createElement(C.a,{description:"\u0412\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u0430\u0436\u043d\u044b\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f",separator:"show"},r.a.createElement(X.a,{asideContent:r.a.createElement(me.a,{checked:c,onChange:function(e){e.currentTarget.checked?(a(r.a.createElement(v.a,{size:"large"})),d.a.send("VKWebAppAllowMessagesFromGroup",{group_id:185650440,key:"dBuBKe1kFcdemzB"})):i(!1)}})},"Push-\u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f")),r.a.createElement(fe.a,{onRefresh:function(){return g()},isFetching:p},r.a.createElement(C.a,null,r.a.createElement(be.a,null,n.map((function(e,t){return r.a.createElement(X.a,{key:t,target:"_blank",href:"https://vk.com/id".concat(e.id),before:r.a.createElement(te.a,{src:e.photo_50})},e.first_name," ",e.last_name)}))))),r.a.createElement(re.a,{vertical:"bottom"},r.a.createElement(w.a,{className:"button-fix",size:"xl"}," \u041f\u043e\u043f\u0430\u0441\u0442\u044c \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0433 ")))}),Ee=Object(W.b)(),ve=function(e){var t=e.id,a=e.photo,n=e.go;return r.a.createElement(_.a,{id:t},r.a.createElement(k.a,{left:r.a.createElement(y.a,{onClick:n,"data-to":"home"},Ee===W.a?r.a.createElement(I.a,null):r.a.createElement(q.a,null))}," "),r.a.createElement("img",{src:a,alt:"img",className:"photo-preview"}))},Ae=a(117),_e=a.n(Ae),je=a(282),ke=a.n(je),Oe=a(283),we=a.n(Oe),Me=a(284),Ce=a.n(Me),Pe=0,Ke=0,We=function(){var e=Object(s.useState)("post"),t=Object(h.a)(e,2),a=t[0],l=t[1],i=Object(s.useState)("home"),u=Object(h.a)(i,2),m=u[0],b=u[1],E=Object(s.useState)(null),A=Object(h.a)(E,2),_=A[0],j=A[1],k=Object(s.useState)(r.a.createElement(v.a,{size:"large"})),O=Object(h.a)(k,2),M=O[0],C=O[1],P=Object(s.useState)([]),W=Object(h.a)(P,2),V=W[0],y=W[1],S=Object(s.useState)("ru"),I=Object(h.a)(S,2),R=I[0],q=I[1],z=Object(s.useState)([]),x=Object(h.a)(z,2),F=x[0],G=x[1],L=Object(s.useState)(""),D=Object(h.a)(L,2),B=D[0],Q=D[1],X=Object(s.useState)("subscription"),Z=Object(h.a)(X,2),$=Z[0],ee=Z[1],ae=Object(s.useState)(!1),ne=Object(h.a)(ae,2),oe=ne[0],ce=ne[1],se=Object(s.useState)(null),re=Object(h.a)(se,2),le=re[0],ie=re[1],de=Object(s.useState)(null),me=Object(h.a)(de,2),pe=(me[0],me[1]),fe=Object(s.useState)(""),he=Object(h.a)(fe,2),be=he[0],Ee=he[1],Ae=Object(s.useState)(0),je=Object(h.a)(Ae,2),Oe=je[0],Me=je[1],We=Object(s.useState)(!0),Ve=Object(h.a)(We,2),ye=(Ve[0],Ve[1],Object(s.useState)(1)),Se=Object(h.a)(ye,2);Se[0],Se[1];Object(s.useEffect)((function(){var e=new URLSearchParams(window.location.search);function t(){return(t=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,j(t),Pe=t.id,C(null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}q(e.get("vk_language")),function(){t.apply(this,arguments)}(),qe()}),[]),Object(s.useEffect)((function(){d.a.subscribe((function(e){var t=e.detail,a=t.type,c=t.data;if("VKWebAppUpdateConfig"===a){var s=document.createAttribute("scheme");s.value=c.scheme?c.scheme:"client_light",document.body.attributes.setNamedItem(s)}if("VKWebAppCallAPIMethodResult"===a&&"getUsers"===c.request_id&&(C(null),y(c.response)),"VKWebAppCallAPIMethodResult"===a&&"getPosts"===c.request_id&&(C(null),c.response.items,G(c.response.items)),"VKWebAppCallAPIMethodResult"===a&&c.request_id,"VKWebAppCallAPIMethodResult"===a&&"checkMessage"===c.request_id&&(C(null),0===c.response.is_allowed?ce(!1):ce(!0)),"VKWebAppAllowMessagesFromGroupResult"!==a&&"VKWebAppAllowMessagesFromGroupFailed"!==a||(C(null),ze()),"VKWebAppAccessTokenReceived"===a&&0===Oe&&(Me(c.access_token),Ke=c.access_token,Ge(Pe,c.access_token)),"VKWebAppCallAPIMethodResult"===a&&"userAlbums"===c.request_id){var r="\u041c\u043e\u0438 \u0440\u0438\u0441\u0443\u043d\u043a\u0438, \u043d\u0430\u0431\u0440\u043e\u0441\u043a\u0438",l=c.response.items;if(0===c.response.count)He(r,r,Ke);else if(void 0===l.find((function(e){return e.title===r})))He(r,r,Ke);else{var i=l.find((function(e){return e.title===r})).id;i,Te(i,Ke)}}"VKWebAppCallAPIMethodResult"===a&&"createAlbum"===c.request_id&&(c.response.id,Te(c.response.id,Ke)),"VKWebAppCallAPIMethodResult"===a&&"photoUrl"===c.request_id&&(pe(c.response.upload_url),Fe(c.response.upload_url,n,Ke,c.response.album_id)),"VKWebAppCallAPIMethodResult"===a&&"photoSave"===c.request_id&&(o="photo".concat(c.response[0].owner_id,"_").concat(c.response[0].id),Ue()),"VKWebAppCallAPIMethodResult"===a&&"sendWall"===c.request_id&&(C(null),ee("sendResult"),Ee(""),ie(null))}))}),[]),Object(s.useEffect)((function(){return window.addEventListener("scroll",Ie),function(){window.removeEventListener("scroll",Ie)}}),[]);var Ie=function(e){e.currentTarget.scrollY,window.innerHeight,Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},Re=function(e){b(e.currentTarget.dataset.to)},qe=function(){d.a.send("VKWebAppCallAPIMethod",{method:"wall.get",request_id:"getPosts",params:{filters:"post",owner_id:"-113161053",count:60,v:"5.105",access_token:"85685eaa85685eaa85685eaa2d8504b3b58856885685eaad8e8ae5c720f4db08e7e9ee0",lang:R,offset:0}})},ze=function(){d.a.send("VKWebAppCallAPIMethod",{method:"messages.isMessagesFromGroupAllowed",request_id:"checkMessage",params:{user_id:Pe,group_id:"185650440",v:"5.105",access_token:"4cf0c9c3b79670ff25922bc47c357ca124e281ed8207cf2507d4fa033792e483e81d94890a085d5509caa"}})},Ue=function(){var e="".concat(o),t=Math.floor(1e9+Math.random()*(9e9+1-1e9));d.a.send("VKWebAppCallAPIMethod",{method:"wall.post",request_id:"sendWall",params:{owner_id:"-".concat("185650440"),from_group:"1",signed:"0",message:c,attachments:e,guid:t,v:"5.103",access_token:"90367c6c798c106c4e98663bed2148d2dd86964270a75b329668efd46b8aa051b8aab8d98dceb5bbd8d5a"}})},xe=r.a.createElement(ke.a,{activeModal:$},r.a.createElement(_e.a,{id:"subscription",onClose:function(){return ee(null)},icon:r.a.createElement(te.a,{src:"https://sun1-25.userapi.com/c857616/v857616788/170f9b/EKExqwLJWgs.jpg",size:72}),caption:r.a.createElement("span",null,r.a.createElement("h1",null,"\u041c\u043e\u0438 \u0440\u0438\u0441\u0443\u043d\u043a\u0438, \u043d\u0430\u0431\u0440\u043e\u0441\u043a\u0438 | \u0411\u043e\u0442 "),"\u041c\u0438\u043d\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442 \u0412\u0430\u043c ",r.a.createElement("br",null)," \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e"),actions:[{title:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f",mode:"primary",action:function(){d.a.send("VKWebAppJoinGroup",{group_id:185650440}),ee(null)}}],actionsLayout:"vertical"}),r.a.createElement(_e.a,{id:"sendPost",onClose:function(){return ee(null)}},r.a.createElement(K.a,null,r.a.createElement("h1",null,"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c"),r.a.createElement(we.a,{className:"margin-bottom",value:be,onChange:function(e){Ee(e.currentTarget.value),c=e.currentTarget.value},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}),r.a.createElement(Ce.a,{top:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"margin-bottom",before:r.a.createElement(Y.a,null),size:"l",onChange:function(e){var t=e.currentTarget.files[0];n=e.currentTarget.files[0];var a=new FileReader;a.readAsDataURL(t),a.onloadend=function(){ie(a.result)}}},"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"),le&&r.a.createElement("img",{className:"margin-bottom modal-img",src:le,alt:"img"}),r.a.createElement(w.a,{mode:"secondary",size:"xl",disabled:!be,onClick:function(){return ee(null),C(r.a.createElement(v.a,{size:"large"})),void(null===le?Ue():Le())}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))),r.a.createElement(_e.a,{id:"sendResult",onClose:function(){return ee(null)},actions:[{title:"\u041e\u0442\u043b\u0438\u0447\u043d\u043e!",mode:"primary",action:function(){ee(null)}}]},r.a.createElement(K.a,null,r.a.createElement("h1",null,"\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430!")))),Te=function(e,t){d.a.send("VKWebAppCallAPIMethod",{method:"photos.getUploadServer",request_id:"photoUrl",params:{album_id:e,v:"5.103",access_token:t}})},Fe=function(e,t,a,n){var o=new FormData;o.append("photo",t);fetch("https://cors-anywhere.herokuapp.com/"+e,{method:"POST",body:o,headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){return e.json()})).then((function(e){e&&Ne(e.server,e.photos_list,e.hash,a,n)})).catch((function(e){}))},Ne=function(e,t,a,n,o){d.a.send("VKWebAppCallAPIMethod",{method:"photos.save",request_id:"photoSave",params:{album_id:o,server:e,photos_list:t,hash:a,v:"5.101",access_token:n}})},Ge=function(e,t){d.a.send("VKWebAppCallAPIMethod",{method:"photos.getAlbums",request_id:"userAlbums",params:{owner_id:e,v:"5.103",access_token:t}})},He=function(e,t,a){d.a.send("VKWebAppCallAPIMethod",{method:"photos.createAlbum",request_id:"createAlbum",params:{title:e,description:t,v:"5.103",access_token:a}})},Le=function(){d.a.send("VKWebAppGetAuthToken",{app_id:7138591,scope:"photos"})};return r.a.createElement(U.a,{activeStory:a,tabbar:r.a.createElement(T.a,null,r.a.createElement(N.a,{onClick:function(){return l("post")},selected:"post"===a},r.a.createElement(H.a,null)),r.a.createElement(N.a,{onClick:function(){return l("catalog")},selected:"catalog"===a},r.a.createElement(J.a,null)))},r.a.createElement(g.a,{activePanel:m,popout:M,id:"post",modal:xe},r.a.createElement(ue,{id:"home",fetchedUser:_,go:Re,setPopout:C,lang:R,postArr:F,offset:0,showPhoto:function(e){Q(e),b("photo")},getPosts:qe,setActiveModal:ee}),r.a.createElement(ve,{id:"photo",go:Re,photo:B})),r.a.createElement(g.a,{activePanel:"people",popout:M,id:"catalog"},r.a.createElement(ge,{setPopout:C,id:"people",fetchedUser:_,go:Re,userArr:V,lang:R,checkMessage:oe,setcheckMessage:ce,isMessagesFromGroupAllowed:ze})))};d.a.send("VKWebAppInit"),i.a.render(r.a.createElement(We,null),document.getElementById("root"))}},[[365,1,2]]]);
//# sourceMappingURL=main.1164e005.chunk.js.map